/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../../../mock-server/MockServerPool.js";
import { ManagementClient } from "../../../../Client.js";
import * as Management from "../../../../api/index.js";

describe("PushNotification", () => {
    test("getApnsProvider", async () => {
        const server = mockServerPool.createServer();
        const client = new ManagementClient({ token: "test", environment: server.baseUrl });

        const rawResponseBody = { bundle_id: "bundle_id", sandbox: true, enabled: true };
        server
            .mockEndpoint()
            .get("/guardian/factors/push-notification/providers/apns")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.guardian.factors.pushNotification.getApnsProvider();
        expect(response).toEqual({
            bundle_id: "bundle_id",
            sandbox: true,
            enabled: true,
        });
    });

    test("setApnsProvider", async () => {
        const server = mockServerPool.createServer();
        const client = new ManagementClient({ token: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { sandbox: true, bundle_id: "bundle_id" };
        server
            .mockEndpoint()
            .patch("/guardian/factors/push-notification/providers/apns")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.guardian.factors.pushNotification.setApnsProvider({});
        expect(response).toEqual({
            sandbox: true,
            bundle_id: "bundle_id",
        });
    });

    test("setFcmProvider", async () => {
        const server = mockServerPool.createServer();
        const client = new ManagementClient({ token: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/guardian/factors/push-notification/providers/fcm")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.guardian.factors.pushNotification.setFcmProvider({});
        expect(response).toEqual({
            key: "value",
        });
    });

    test("setFcmv1Provider", async () => {
        const server = mockServerPool.createServer();
        const client = new ManagementClient({ token: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/guardian/factors/push-notification/providers/fcmv1")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.guardian.factors.pushNotification.setFcmv1Provider({});
        expect(response).toEqual({
            key: "value",
        });
    });

    test("getSnsProvider", async () => {
        const server = mockServerPool.createServer();
        const client = new ManagementClient({ token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            aws_access_key_id: "aws_access_key_id",
            aws_secret_access_key: "aws_secret_access_key",
            aws_region: "aws_region",
            sns_apns_platform_application_arn: "sns_apns_platform_application_arn",
            sns_gcm_platform_application_arn: "sns_gcm_platform_application_arn",
        };
        server
            .mockEndpoint()
            .get("/guardian/factors/push-notification/providers/sns")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.guardian.factors.pushNotification.getSnsProvider();
        expect(response).toEqual({
            aws_access_key_id: "aws_access_key_id",
            aws_secret_access_key: "aws_secret_access_key",
            aws_region: "aws_region",
            sns_apns_platform_application_arn: "sns_apns_platform_application_arn",
            sns_gcm_platform_application_arn: "sns_gcm_platform_application_arn",
        });
    });

    test("setSnsProvider", async () => {
        const server = mockServerPool.createServer();
        const client = new ManagementClient({ token: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = {
            aws_access_key_id: "aws_access_key_id",
            aws_secret_access_key: "aws_secret_access_key",
            aws_region: "aws_region",
            sns_apns_platform_application_arn: "sns_apns_platform_application_arn",
            sns_gcm_platform_application_arn: "sns_gcm_platform_application_arn",
        };
        server
            .mockEndpoint()
            .put("/guardian/factors/push-notification/providers/sns")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.guardian.factors.pushNotification.setSnsProvider();
        expect(response).toEqual({
            aws_access_key_id: "aws_access_key_id",
            aws_secret_access_key: "aws_secret_access_key",
            aws_region: "aws_region",
            sns_apns_platform_application_arn: "sns_apns_platform_application_arn",
            sns_gcm_platform_application_arn: "sns_gcm_platform_application_arn",
        });
    });

    test("updateSnsProvider", async () => {
        const server = mockServerPool.createServer();
        const client = new ManagementClient({ token: "test", environment: server.baseUrl });
        const rawRequestBody = {};
        const rawResponseBody = {
            aws_access_key_id: "aws_access_key_id",
            aws_secret_access_key: "aws_secret_access_key",
            aws_region: "aws_region",
            sns_apns_platform_application_arn: "sns_apns_platform_application_arn",
            sns_gcm_platform_application_arn: "sns_gcm_platform_application_arn",
        };
        server
            .mockEndpoint()
            .patch("/guardian/factors/push-notification/providers/sns")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.guardian.factors.pushNotification.updateSnsProvider();
        expect(response).toEqual({
            aws_access_key_id: "aws_access_key_id",
            aws_secret_access_key: "aws_secret_access_key",
            aws_region: "aws_region",
            sns_apns_platform_application_arn: "sns_apns_platform_application_arn",
            sns_gcm_platform_application_arn: "sns_gcm_platform_application_arn",
        });
    });

    test("getSelectedProvider", async () => {
        const server = mockServerPool.createServer();
        const client = new ManagementClient({ token: "test", environment: server.baseUrl });

        const rawResponseBody = { provider: "guardian" };
        server
            .mockEndpoint()
            .get("/guardian/factors/push-notification/selected-provider")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.guardian.factors.pushNotification.getSelectedProvider();
        expect(response).toEqual({
            provider: "guardian",
        });
    });

    test("setProvider", async () => {
        const server = mockServerPool.createServer();
        const client = new ManagementClient({ token: "test", environment: server.baseUrl });
        const rawRequestBody = { provider: "guardian" };
        const rawResponseBody = { provider: "guardian" };
        server
            .mockEndpoint()
            .put("/guardian/factors/push-notification/selected-provider")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.guardian.factors.pushNotification.setProvider({
            provider: "guardian",
        });
        expect(response).toEqual({
            provider: "guardian",
        });
    });
});
